# 数值优化 {#optimation}

## 测试函数

$$f(x,y) = 3*(1-x)*\mathrm{e}^{-x^2 - (y+1)^2} - 10*(\frac{x}{5} - x^3 - y^5)*\mathrm{e}^{-x^2-y^2} - \frac{1}{3}*\mathrm{e}^{-(x+1)^2-y^2}$$

```{r asy-3d-ex, engine = "asy", fig.cap = "三维图形", dev= if (knitr::is_latex_output()) "pdf" else "png"}
import graph3;
import grid3;
import palette;

currentprojection=orthographic(0.8,1,1);

size(400,300,IgnoreAspect);

defaultrender.merge=true;

real f(pair z) {return 3*(1-z.x)*exp(-z.x^2-(z.y+1)^2)-10*(z.x/5-z.x^3-z.y^5)*exp(-z.x^2-z.y^2)-1/3*exp(-(z.x+1)^2-z.y^2);}

surface s=surface(f,(-3,-3),(3,3),50,Spline);

draw(s,mean(palette(s.map(zpart),Rainbow())),black); 

grid3(XYZgrid);
```


多元函数求导

符号微分，表达式微分
符号求导，表达式求导

```{r}
peaks_fun <- expression(3*(1-x)*exp^(-x^2 - (y+1)^2) - 10*(x/5 - x^3 - y^5)*exp^(-x^2-y^2) -1/3*exp^(-(x+1)^2-y^2))
```

```{r}
D(peaks_fun, "x")
D(peaks_fun, "y")
```

